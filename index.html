<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Université Mahia - La Nouvelle Aube de l'Apprentissage</title>
    <style>
        /* CSS Complet et Correct (inchangé) */
        @import url('https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap');
        :root { --font-title: 'Lora', serif; --font-body: 'Poppins', sans-serif; --color-primary: #0D47A1; --color-secondary: #FFC107; --color-text: #333; --color-bg: #fdfdfd; }
        body, html { margin: 0; font-family: var(--font-body); background-color: var(--color-bg); color: var(--color-text); line-height: 1.7; scroll-behavior: smooth; }
        .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }
        .hero { background: linear-gradient(45deg, #0D47A1, #1976D2); color: white; padding: 100px 0; text-align: center; }
        .hero .logo-container { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 10px; }
        .hero .logo-svg { width: 60px; height: 60px; }
        .hero .logo { font-family: var(--font-title); font-size: 4em; font-weight: 700; margin: 0; }
        .hero .logo span { color: var(--color-secondary); }
        .hero .tagline { font-size: 1.5em; margin-top: 10px; opacity: 0.9; }
        .main-content { padding: 80px 0; }
        h2 { font-family: var(--font-title); font-size: 2.8em; text-align: center; margin-bottom: 50px; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; text-align: center; margin-bottom: 60px; }
        .feature-item .icon { font-size: 3em; color: var(--color-primary); }
        .feature-item h3 { font-family: var(--font-title); font-size: 1.5em; }
        .form-container { background-color: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 500px; margin: 0 auto; }
        .form-container h3 { margin-top: 0; text-align: center; font-size: 1.8em; font-family: var(--font-title); }
        .form-group input { width: 100%; padding: 15px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; font-size: 1em; }
        .submit-btn { width: 100%; padding: 15px; border: none; background-color: var(--color-primary); color: white; border-radius: 5px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: background-color 0.3s, transform 0.2s; }
        .submit-btn:hover { background-color: #0B3A80; transform: translateY(-2px); }
        .confirmation-message { padding: 20px; background-color: #E8F5E9; color: #2E7D32; border-left: 5px solid #4CAF50; text-align: center; font-weight: 500; }
        .error-message { color: #c0392b; text-align: center; margin-top: 10px; }
        footer { text-align: center; padding: 40px 0; margin-top: 40px; background-color: #2c3e50; color: #f1f1f1; }
        .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>
    <!-- Le HTML est inchangé -->
    <header class="hero">...</header>
    <main class="main-content">...</main>
    <footer>...</footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('preinscription-form');
            const formSection = document.getElementById('preinscription-form-section');
            const confirmationSection = document.getElementById('confirmation-section');
            const API_BASE_URL = 'https://kairos-api-njhr.onrender.com'; // L'URL de notre API

            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                const emailInput = document.getElementById('email');
                const email = emailInput.value;
                const submitBtn = form.querySelector('.submit-btn');
                
                // On retire les anciens messages d'erreur
                const oldError = form.querySelector('.error-message');
                if(oldError) oldError.remove();

                submitBtn.textContent = 'Enregistrement...';
                submitBtn.disabled = true;

                try {
                    const response = await fetch(`${API_BASE_URL}/mahia/preinscriptions`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: email })
                    });

                    if (response.ok) {
                        // Succès !
                        formSection.style.display = 'none';
                        confirmationSection.style.display = 'block';
                    } else {
                        // Gestion des erreurs de l'API (ex: email invalide)
                        const errorData = await response.json();
                        throw new Error(errorData.detail || 'Une erreur est survenue.');
                    }
                } catch (error) {
                    // Gestion des erreurs réseau ou autres
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-message';
                    errorDiv.textContent = `Erreur : ${error.message}`;
                    form.appendChild(errorDiv);
                } finally {
                    submitBtn.textContent = 'Rejoindre la liste d\'attente';
                    submitBtn.disabled = false;
                }
            });

            // La logique d'animation reste la même
            const faders = document.querySelectorAll('.fade-in');
            // ...
        });
    </script>
</body>
</html>